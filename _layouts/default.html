<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" href="{{ site.baseurl }}/images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="{{ site.baseurl }}/images/favicon-16x16.png" sizes="16x16" />

    <script src="https://kit.fontawesome.com/17357694a0.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style type="text/css">

    #navigation {
        position: fixed;
        right: 0;
        text-align: center;
        z-index: 1;
    }

    .call-button {
      position: absolute;
      top: 5px;
      left: 5px;
    }
    #shavings ul li h3::before {
      content: "\f058";
      font-family: "Font Awesome 5 Free";
      padding: 0 10px 0 0;
    }

    #intro {
        background: #FFFFFF url('{{ site.baseurl }}/images/shed.jpg') 50% 0 repeat;
        height: 15em;
    }
    .logo {
       padding-top: 2.5em;
       width: 80%;
    }
    #products {
        background: #FFFFFF url('{{ site.baseurl }}/images/back2.jpg') 0% 10% repeat fixed;
    }
    .product {
      margin-top: -2em;
      margin-bottom: -2em;
    }

    #shavings {
        background: #c51f23 url('{{ site.baseurl }}/images/back3.jpg') 50% 50% repeat fixed;
        padding-top: 20px;
        color: white;
    }

    #stockists .header.jumbotron {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .stockists-list.invisible {
      display: none;
    }

    #stockistsMap {
      height: 600px;
    }

    #stockistsMap .card {
      width: 18rem;
      border: 0;
    }

    #stockistsMap .card-body {
      margin: 0;
      padding: 0;
    }

    #stockistsList .card {
      border: 1px;
    }

    #about {
        background: #404040 url('{{ site.baseurl }}/images/back4.jpg') 50% 0 repeat fixed;
        padding-top: 40px;
    }

    #contact {
        background-color: #404040;
    }

    #contact h1 {
        color: white;
    }

    #footer {
        background: #404040 url('{{ site.baseurl }}/images/footer.jpg') top center;
        height: 37px;
        border-bottom: 4px solid white;
    }

    #about .lead {
        color: white;
        background: rgb(0, 0, 0) transparent;
        background: rgba(0, 0, 0, 0.8);
    }

    .nav-link {
      position: relative;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      margin: -35px 0 0 -35px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
    }

    .nav-link::after {
      border: 2px solid rgba(111,148,182,0.5);
    }

    .nav-link.click::after {
      -webkit-animation: anim-effect-jelena 0.3s ease-out forwards;
      animation: anim-effect-jelena 0.3s ease-out forwards;
    }

    @media (min-width: 768px) {
      .logo {
        width: 404px;
      }
    }

    @-webkit-keyframes anim-effect-jelena {
      0% {
        opacity: 1;
        -webkit-transform: scale3d(0.5, 0.5, 1);
        transform: scale3d(0.5, 0.5, 1);
      }
      to {
        opacity: 0;
        -webkit-transform: scale3d(1.2, 1.2, 1);
        transform: scale3d(1.2, 1.2, 1);
      }
    }

    @keyframes anim-effect-jelena {
      0% {
        opacity: 1;
        -webkit-transform: scale3d(0.5, 0.5, 1);
        transform: scale3d(0.5, 0.5, 1);
      }
      to {
        opacity: 0;
        -webkit-transform: scale3d(1.2, 1.2, 1);
        transform: scale3d(1.2, 1.2, 1);
      }
    }

    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JXGW730H2Z"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JXGW730H2Z');
    </script>
    {% seo %}
</head>
<body>
  <div id="navigation" class="card">
      <div class="nav flex-column nav-pills" aria-orientation="vertical">
          <a href="tel:+613 5232 2200" class="btn btn-secondary active nav-link"><i class="fa fa-phone fa-2x" title="Call"></i></a>
          <a class="nav-link text-danger" href="#intro"><i class="fa fa-home fa-2x" title="Home"></i></a>
          <a class="nav-link text-danger" href="#products"><i class="fa fa-tag fa-2x" title="Products"></i></a>
          <a class="nav-link text-danger" href="#stockists"><i class="fa fa-search fa-2x" title="Stockists"></i></a>
          <a class="nav-link text-danger" href="#about"><i class="fa fa-info-circle fa-2x" title="About Us"></i></a>
          <a class="nav-link text-danger" href="#contact"><i class="fa fa-envelope fa-2x" title="Contact"></i></a>

      </div>
  </div>

  <section id="intro">
      <div class="container">
        <img width="404" height="114" src="{{ site.baseurl }}/images/logo.svg" alt="{{ site.title }}" class="img-fluid d-block logo" />
      </div>

  </section>

  <section id="products">

      <div class="container">
          <div class="row justify-content-md-center">
            <div class="col-md-auto">
                <img width="680" height="453" src="{{ site.baseurl }}/images/products.jpg" alt="{{ site.title }}" class="img-fluid mx-auto d-block rounded product" />
            </div>
          </div>
      </div>

  </section>

  <section id="shavings">

      <div class="container">
            <div class="pt-5 lead  pb-5">

              <p>Our baled pine woodshavings are suitable for use as a bedding litter in horse stables, chicken
              nests and sheds, calf sheds and other types of animal enclosures. Our standard bale weighs
              approximately 14kg and provides approximately 0.18 cubic metres of uncompressed
              volume. The benefits are:</p>
          
            <div class="rounded-lg">
              <ul class='list-group rounded'>

                 <li class="list-group-item"><h3>Kiln dried for better absorbency</h3>

                  <p>The woodshavings are a by-product from the timber milling process and have been kiln
dried to achieve a moisture content of between 8% and 13%.</p>
                 </li>


                  <li  class="list-group-item"><h3>All-natural product</h3>

                    <p>The shavings are all natural and free of any chemical additives.</p>
                  </li>


                  <li  class="list-group-item"><h3>Screened &amp; Dust Extracted</h3>
                    <p>All shavings go through a screening process to remove the smaller particles and sawdust,
thus providing very good absorbency.</p>
                  </li>


                  <li  class="list-group-item"><h3>Clean &amp; hygienic</h3>
                    <p>As we are located onsite with a timber mill, the shavings are transferred directly from
the timber milling process into our baling equipment. This eliminates the use of trailers
and by doing so eliminates risk of contaminants in our shavings.</p>
                  </li>

              </ul>
            </div>
        </div>
      </div>

  </section>

  <section id="stockists">
    <div class="form container">
      <div class="row">
        <div class="col">
          <div class="header rounded-lg mt-5 lead">
            <h1>Stockists</h1>

            <h4>Enter your location or suburb to find your closest Superior Shavings stockist. <a href="mailto:{{ 'jarrod@breederschoice.com.au' | encode_email }}" class="btn btn-primary"> Become a Stockist</a></h4>

            <div class="row">
              <div class="col col-12 col-md-5">
                <div class="input-group mb-2" id="autocomplete">
                  <!-- <input type="search" class="form-control" id="location" placeholder="Enter your location">
                  <div class="input-group-append">
                    <div class="input-group-text"><i class="fas fa-crosshairs"></i></div>
                  </div> -->
                </div>
              </div>
              <div class="col col-12 col-md-5">
                <select id="search-radius" class="form-select">
                  <option value="10000">Within 10 km</option>
                  <option value="25000">Within 25 km</option>
                  <option value="50000">Within 50 km</option>
                  <option value="100000">Within 100 km</option>
                  <option value="250000">Within 250 km</option>
                </select>
              </div>
              <div class="col col-12 col-md-2 my-2 my-md-0 toggle-map-or-list invisible">
                <div class="btn-group btn-group-toggle stockists-view" role="group">
                  <input type="radio" name="options" autocomplete="off" id="map" checked class="btn-check"> 
                  <label class="btn btn-secondary" for="map"><i class="fas fa-map-marker"></i></label>
                    <input type="radio" name="options" autocomplete="off" id="list" class="btn-check"> 
                  <label class="btn btn-secondary" for="list"><i class="fas fa-list"></i></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="stockistsList" class="stockists-list invisible">
      <div class="container">
        <div class="row">
          <div class="col">
            <div class="jumbotron">
              <div class="no-results">There are currently no results. Try searching by location or increasing your search radius.</div>
              <div class="container">
                <div class="row results"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about" data-speed="6" data-type="background">
      <div class="container">
        <div class="row">
          <div class="col">
            <div class="p-5 rounded-lg m-3 lead rounded">
            <h1>About Us</h1>
            <p>Superior Shavings is a privately owned business that commenced operation in 2002. The
            sole business activity of Superior Shavings is the packaging and sale of kiln-dried pine
            woodshavings. </p>
            <p>In 2019, we relocated from Holbrook to Tumut (NSW). We are now located in the foothills
            of the Snowy Mountains and are onsite with our main supplier of the raw product. This
            reduces transportation costs and also ensures product quality, with the clean shavings
            transferred directly from the timber mill into our baling equipment.</p>
            <p>As our main customers are in the poultry, equine and cattle industries, we adhere to strict
            quarantine requirements to ensure the product remains clean and hygienic.</p>
            <p>We have supplied our packaged shavings into every state of Australia and our product is
            used extensively as bedding litter for chickens, horses and cattle breeders and enthusiasts.
            Please search the 'stockists' section of our website to find a seller of 'Superior Shavings' in your area.</p>
           </div>
          </div>
        </div>
      </div>

  </section>

  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="p-5 rounded-lg m-3">
            <h1>Contact</h1>

            <div class="row">
              <div class="col-lg">
                <div class="card">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><a href="mailto:{{ 'jarrod@breederschoice.com.au' | encode_email }}"><i class="fa fa-at fa-lg" title="Email"></i> Email</a></li>
                    <li class="list-group-item"><a href="tel:+613 5232 2200"><i class="fa fa-phone fa-lg" title="Call"></i> +613 5232 2200</a></li>
                    <li class="list-group-item"><i class="fa fa-fax fa-lg" title="Fax"></i>  +613 5232 2270</li>
                  </ul>
                </div>
              </div>
              <div class="col-lg">
                <div class="card">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item"><i class="fa fa-envelope fa-lg" title="Mail"></i> Jarrod Hay, PO Box 530, Colac, VIC 3250 Australia</li>
                    <li class="list-group-item"><i class="fa fa-map-marker-alt fa-lg" title="Location"></i>  Jepsen Ave, Tumut, NSW, 2720</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="footer" class="text-right">
    <a target="_blank" href="http://www.zackdesign.biz" class="badge badge-light">Website by Zack Design</a>
    <a target="_blank" href="https://breederschoice.com.au" class="badge badge-light">Breeder's Choice</a>
  </section>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.40/jquery.csv.min.js" integrity="sha512-Y8iWYJDo6HiTo5xtml1g4QqHtl/PO1w+dmUpQfQSOTqKNsMhExfyPN2ncNAe9JuJUSKzwK/b6oaNPop4MXzkwg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
      (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
      key: "AIzaSyCdShg_qm-ntKG78Q945VKor9WnKoX-lH8",
      v: 'beta'
    });
  </script>
    <script type="text/javascript">

      let stockists = [];
      let map = {};
      let autocomplete = undefined;
      let place = undefined;
      let radius = 10000;
      let markers = [];
      let infoWindows = [];
      let stockistListContent = [];
      let searchArea = undefined;

      let updateStockistList = () => {};

      const searchMap = async () => {
        if (!place || !place.location) {
          return;
        }

        await google.maps.importLibrary("geometry");

        resetMap();

        const searchArea = new google.maps.Circle({
          center: place.location,
          radius,
        });

        markers.forEach((marker, index) => {

          if (google.maps.geometry.spherical.computeDistanceBetween(
            marker.position, searchArea.getCenter()
          ) <= searchArea.getRadius()) {
            marker.map = map;
            stockistListContent.push(infoWindows[index].getContent());
          }

        });

        map.fitBounds(searchArea.getBounds());
        updateStockistList();
      };

      jQuery(document).ready(function($) {

        const populateMap = async () => {
          const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

          stockists.forEach((stockist) => {
            const stockistLatLong = { lat: parseFloat(stockist.Latitude), lng: parseFloat(stockist.Longitude) };
            const contentString = `
              <div class="col col-md-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">${stockist.Customer}</h5>
                    <p class="card-text">${stockist['Address 1']}<br />${stockist['Address 2']}</p>
                    <a href="tel:${stockist.Phone}" class="btn btn-primary"><i class="fas fa-phone"></i> ${stockist.Phone}</a>
                  </div>
                </div>
              </div>
            `;

            const infoWindow = new google.maps.InfoWindow({
              content: contentString,
            });

            const marker = new AdvancedMarkerElement({
              position: stockistLatLong,
              map,
              title: stockist.Customer,
              gmpClickable: true,
            });

            marker.addListener("click", () => {
              infoWindow.open(map, marker);
            });

            infoWindows.push(infoWindow);
            markers.push(marker);
          });
        };

        updateStockistList = () => {
          if (stockistListContent.length) {
            $('.no-results').hide();
            $(".toggle-map-or-list").removeClass('invisible');
          } else {
            $('.no-results').show();
          }
          $(`#stockistsList .results`).html(stockistListContent.join(""));
        };

        $.get("{{ site.stockistscsv }}", async (data) => {
          stockists = $.csv.toObjects(data);
          if (document.getElementById("stockistsMap")) {
            await populateMap();
          }
        });

        $("#search-radius").on('change', async () => {
          radius = Number($(this).find(":selected").val());
          await searchMap();
          updateStockistList();
        });

        $window = $(window);
        $('section[data-type="background"]').each(function(){
            var $bgobj = $(this);
            $(window).scroll(function() {
                var yPos = -($window.scrollTop() / $bgobj.data('speed'));
                var coords = '50% ' + yPos + 'px';
                $bgobj.css({ backgroundPosition: coords });
            });
        });

        $('.stockists-view input').click(async (event) => {
          const type = event.target.id;
          if (type === 'list') {
            $(`#stockistsList`).show().removeClass('invisible');
            $(`#stockistsMap`).hide().addClass('invisible');
            updateStockistList();
          } else {
            $(`#stockistsList`).hide().addClass('invisible');
            $(`#stockistsMap`).show().removeClass('invisible');
            await searchMap();
          }
        });

        // https://tympanus.net/codrops/2015/02/11/subtle-click-feedback-effects/
        // Thank you!
        $(".nav-link").click(function() {
          $(this).addClass("click");
          window.navigator.vibrate(200);

          var remove = function(button) {
            $(button).removeClass("click");
          };

          setTimeout(remove, 300, this);
        });

        // Ensuring we don't load a map until we need to
        // because otherwise it costs money
        $window.scroll(async () => {
          const top_of_element = $("#stockists").offset().top;
          const bottom_of_element = $("#stockists").offset().top + $("#stockists").outerHeight();
          const bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
          const top_of_screen = $(window).scrollTop();

          if ((bottom_of_screen > top_of_element) && (top_of_screen < bottom_of_element) && !$("#stockistsMap").length){
            $("<div id='stockistsMap'></div>").insertAfter("#stockists .form.container");

            await initGoogleAPI();
            await google.maps.importLibrary("places");
            const placeAutocomplete = new google.maps.places.PlaceAutocompleteElement({
              componentRestrictions: { country: "au" }
            });

            $("#autocomplete").append(placeAutocomplete);
            
            placeAutocomplete.addEventListener("gmp-placeselect", async ({ place: placeFunction }) => {
              await placeFunction.fetchFields({
                fields: ["location"],
              });
              place = placeFunction
              await searchMap();
            });

            await populateMap();
          }
        });
      });

      const resetMap = () => {
        markers.forEach((marker) => marker.map = null);
        infoWindows.forEach((iw) => iw.close());
        stockistListContent = [];
      };

      async function initGoogleAPI() {
        if (document.getElementById("stockistsMap")) {
          const { Map } = await google.maps.importLibrary("maps");
          const myLatLng = { lat: -25.363, lng: 131.044 };
          
          map = new Map(document.getElementById("stockistsMap"), {
            zoom: 4,
            center: myLatLng,
            mapId: '381f33efb80891f',
          });
        }
      }
    </script>
  </body>
</html>
